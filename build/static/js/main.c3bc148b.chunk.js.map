{"version":3,"sources":["services/api.js","styles/global.js","styles.js","components/Upload/styles.js","components/Upload/index.js","components/FileList/styles.js","components/FileList/index.js","App.js","index.js"],"names":["api","axios","create","baseURL","createGlobalStyle","_templateObject","Container","styled","div","styles_templateObject","Content","_templateObject2","dragActive","css","Upload_styles_templateObject","dragReject","styles_templateObject2","DropContainer","attrs","className","_templateObject3","props","isDragActive","isDragReject","messageColors","default","error","success","UploadMessage","p","_templateObject4","type","Upload","renderDragMessage","react_default","a","createElement","role","aria-label","_this2","this","onUpload","es","accept","onDropAccepted","_ref","getRootProps","getInputProps","Object","assign","Component","ul","FileList_styles_templateObject","FileInfo","FileList_styles_templateObject2","Preview","styles_templateObject3","src","FileList","files","onDelete","styles_Container","map","uploadedFile","key","id","preview","name","readableSize","url","onClick","uploaded","dist_default","styles","root","width","path","stroke","strokeWidth","percentage","progress","href","target","rel","md","style","marginRight","size","color","App","state","uploadedFiles","handleUpload","file","uniqueId","filesize","URL","createObjectURL","_this","setState","concat","forEach","processUpload","updateFile","data","objectSpread","FormData","append","post","onUploadProgress","e","parseInt","Math","round","loaded","total","then","response","_id","catch","handleDelete","_callee","regenerator_default","wrap","_context","prev","next","delete","filter","stop","get","revokeObjectURL","Upload_Upload","length","components_FileList","global","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.c3bc148b.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://nodejs-upload-files.herokuapp.com',\n});\n\nexport default api;\n","import { createGlobalStyle } from 'styled-components';\n\nimport 'react-circular-progressbar/dist/styles.css';\n\nexport default createGlobalStyle`\n  * {\n      margin: 0;\n      padding: 0;\n      outline: 0;\n      box-sizing: border-box;\n  }\n\n  body {\n      font-family: Arial, Helvetica, sans-serif;\n      font-size: 14px;\n      background: #7159c1;\n      text-rendering: optimizeLegibility;\n      -webkit-font-smoothing: antialiased;\n    }\n\n    html, body, #root {\n        height: 100%;\n    }\n`;\n","import styled from 'styled-components';\n\nexport const Container = styled.div`\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const Content = styled.div`\n  width: 100%;\n  max-width: 400px;\n  margin: 30px;\n  background: #fff;\n  border-radius: 4px;\n  padding: 20px;\n`;\n","import styled, { css } from 'styled-components';\n\nconst dragActive = css`\n  border-color: #78e5d5;\n`;\n\nconst dragReject = css`\n  border-color: #e57878;\n`;\n\nexport const DropContainer = styled.div.attrs({\n  className: 'dropzone',\n})`\n  border: 1px dashed #ddd;\n  border-radius: 4px;\n  cursor: pointer;\n\n  transition: height 0.2s ease;\n\n  ${props => props.isDragActive && dragActive};\n  ${props => props.isDragReject && dragReject};\n`;\n\nconst messageColors = {\n  default: '#999',\n  error: '#e57878',\n  success: '#78e5d5',\n};\n\nexport const UploadMessage = styled.p`\n  display: flex;\n  color: ${props => messageColors[props.type || 'default']};\n  justify-content: center;\n  align-items: center;\n  padding: 15px 0;\n`;\n","import React, { Component } from 'react';\n\nimport Dropzone from 'react-dropzone';\n\nimport { DropContainer, UploadMessage } from './styles';\n\nexport default class Upload extends Component {\n  renderDragMessage = (isDragActive, isDragReject) => {\n    if (!isDragActive) {\n      return (\n        <UploadMessage>\n          Drag the files here...\n          <span role=\"img\" aria-label=\"attachment\">\n            ðŸ“Ž\n          </span>\n          <span role=\"img\" aria-label=\"hand\">\n            ðŸ‘‡\n          </span>\n        </UploadMessage>\n      );\n    }\n\n    if (isDragReject) {\n      return <UploadMessage type=\"error\">Unsupported file type âš </UploadMessage>;\n    }\n\n    return (\n      <UploadMessage type=\"success\">\n        Drop the files here...\n        <span role=\"img\" aria-label=\"attachment\">\n          ðŸ“Ž\n        </span>\n        <span role=\"img\" aria-label=\"hand\">\n          ðŸ‘‡\n        </span>\n      </UploadMessage>\n    );\n  };\n\n  render() {\n    const { onUpload } = this.props;\n\n    return (\n      <Dropzone accept=\"image/*\" onDropAccepted={onUpload}>\n        {({\n          getRootProps, getInputProps, isDragActive, isDragReject,\n        }) => (\n          <DropContainer\n            {...getRootProps()}\n            isDragActive={isDragActive}\n            isDragReject={isDragReject}\n          >\n            <input {...getInputProps()} />\n            {this.renderDragMessage(isDragActive, isDragReject)}\n          </DropContainer>\n        )}\n      </Dropzone>\n    );\n  }\n}\n","import styled from 'styled-components';\n\nexport const Container = styled.ul`\n  margin-top: 20px;\n  li {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    color: #444;\n    & + li {\n      margin-top: 15px;\n    }\n  }\n`;\n\nexport const FileInfo = styled.div`\n  display: flex;\n  align-items: center;\n  div {\n    display: flex;\n    flex-direction: column;\n    span {\n      font-size: 12px;\n      color: #999;\n      margin-top: 5px;\n      button {\n        border: 0;\n        background: transparent;\n        color: #e57878;\n        margin-left: 5px;\n        cursor: pointer;\n      }\n    }\n  }\n`;\n\nexport const Preview = styled.div`\n  width: 36px;\n  height: 36px;\n  border-radius: 5px;\n  background-image: url(${props => props.src});\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: 50% 50%;\n  margin-right: 10px;\n`;\n","import React from 'react';\nimport CircularProgressbar from 'react-circular-progressbar';\nimport { MdCheckCircle, MdError, MdLink } from 'react-icons/md';\n\nimport { Container, FileInfo, Preview } from './styles';\n\nconst FileList = ({ files, onDelete }) => (\n  <Container>\n    {files.map(uploadedFile => (\n      <li key={uploadedFile.id}>\n        <FileInfo>\n          <Preview src={uploadedFile.preview} />\n          <div>\n            <strong>{uploadedFile.name}</strong>\n            <span>\n              {uploadedFile.readableSize}\n              {' '}\n              {!!uploadedFile.url && (\n                <button onClick={() => onDelete(uploadedFile.id)}>Delete</button>\n              )}\n            </span>\n          </div>\n        </FileInfo>\n\n        <div>\n          {!uploadedFile.uploaded && !uploadedFile.error && (\n            <CircularProgressbar\n              styles={{\n                root: { width: 24 },\n                path: { stroke: '#7159c1' },\n              }}\n              strokeWidth={10}\n              percentage={uploadedFile.progress}\n            />\n          )}\n\n          {uploadedFile.url && (\n            <a href={uploadedFile.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              <MdLink style={{ marginRight: 8 }} size={24} color=\"#222\" />\n            </a>\n          )}\n\n          {uploadedFile.uploaded && <MdCheckCircle size={24} color=\"#78e5d5\" />}\n          {uploadedFile.error && <MdError size={24} color=\"#e57878\" />}\n        </div>\n      </li>\n    ))}\n  </Container>\n);\n\nexport default FileList;\n","import React, { Component } from 'react';\nimport { uniqueId } from 'lodash';\nimport filesize from 'filesize';\n\nimport api from './services/api';\n\nimport GlobalStyle from './styles/global';\nimport { Container, Content } from './styles';\n\nimport Upload from './components/Upload';\nimport FileList from './components/FileList';\n\nclass App extends Component {\n  state = {\n    uploadedFiles: [],\n  };\n\n  async componentDidMount() {\n    const response = await api.get('posts');\n\n    this.setState({\n      uploadedFiles: response.data.map(file => ({\n        id: file._id,\n        name: file.name,\n        readableSize: filesize(file.size),\n        preview: file.url,\n        uploaded: true,\n        url: file.url,\n      })),\n    });\n  }\n\n  handleUpload = (files) => {\n    const uploadedFiles = files.map(file => ({\n      file,\n      id: uniqueId(),\n      name: file.name,\n      readableSize: filesize(file.size),\n      preview: URL.createObjectURL(file),\n      progress: 0,\n      uploaded: false,\n      error: false,\n      url: null,\n    }));\n\n    this.setState({\n      uploadedFiles: this.state.uploadedFiles.concat(uploadedFiles),\n    });\n\n    uploadedFiles.forEach(this.processUpload);\n  };\n\n  updateFile = (id, data) => {\n    this.setState({\n      uploadedFiles: this.state.uploadedFiles.map(uploadedFile => (id === uploadedFile.id ? { ...uploadedFile, ...data } : uploadedFile)),\n    });\n  };\n\n  processUpload = (uploadedFile) => {\n    const data = new FormData();\n\n    data.append('file', uploadedFile.file, uploadedFile.name);\n\n    api\n      .post('posts', data, {\n        onUploadProgress: (e) => {\n          const progress = parseInt(Math.round((e.loaded * 100) / e.total));\n\n          this.updateFile(uploadedFile.id, {\n            progress,\n          });\n        },\n      })\n      .then((response) => {\n        this.updateFile(uploadedFile.id, {\n          uploaded: true,\n          id: response.data._id,\n          url: response.data.url,\n        });\n      })\n      .catch(() => {\n        this.updateFile(uploadedFile.id, {\n          error: true,\n        });\n      });\n  };\n\n  handleDelete = async (id) => {\n    await api.delete(`posts/${id}`);\n\n    this.setState({\n      uploadedFiles: this.state.uploadedFiles.filter(file => file.id !== id),\n    });\n  };\n\n  componentWillUnmount() {\n    this.state.uploadedFiles.forEach(file => URL.revokeObjectURL(file.preview));\n  }\n\n  render() {\n    const { uploadedFiles } = this.state;\n\n    return (\n      <Container>\n        <Content>\n          <Upload onUpload={this.handleUpload} />\n          {!!uploadedFiles.length && (\n            <FileList files={uploadedFiles} onDelete={this.handleDelete} />\n          )}\n        </Content>\n        <GlobalStyle />\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}